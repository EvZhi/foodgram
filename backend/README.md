# Foodgram

Foodgram — это веб-приложение, где пользователи могут публиковать рецепты, добавлять их в избранное, подписываться на других пользователей и формировать список покупок. Проект включает несколько приложений, каждое из которых отвечает за свою функциональность.

## Основные функции
- **Регистрация и авторизация пользователей**: поддержка аутентификации с использованием email.
- **Управление пользователями**:
  - Создание профилей пользователей с аватарами.
  - Подписка на других пользователей.
- **Публикация рецептов**:
  - Добавление рецептов с изображениями и ингредиентами.
  - Фильтрация рецептов по тегам.
- **Работа с избранным и списком покупок**:
  - Добавление рецептов в избранное.
  - Формирование списка покупок для выбранных рецептов.
  
## Структура проекта
Проект состоит из нескольких приложений:
- `users` — управление пользователями, их регистрацией, авторизацией и аватарами.
- `recipes` — создание, просмотр и фильтрация рецептов.
- `ingredients` — управление ингредиентами и их количеством.
- `tags` — система тегов для рецептов.
- `favorites` — добавление рецептов в избранное.
- `shopping_cart` — функциональность для формирования списка покупок.
- `subscriptions` — управление подписками на пользователей.

## Установка проекта
1. Склонируйте репозиторий:
   ```bash
   git clone <url>
   cd foodgram
   ```

2. Установите виртуальное окружение и зависимости:
   ```bash
   python3 -m venv venv
   source venv/bin/activate
   pip install -r requirements.txt
   ```

3. Примените миграции и создайте суперпользователя:
   ```bash
   python manage.py migrate
   python manage.py createsuperuser
   ```

4. Запустите сервер разработки:
   ```bash
   python manage.py runserver
   ```

5. Для наполнения тестовыми данными выполните команду:
   ```bash
   python manage.py load_all_data
   ```

## Создание тестовых пользователей
В проекте предустановлены:
- **Суперпользователь**:
  - Логин: `superuser`
  - Email: `superuser@example.com`
  - Пароль: `super12345`
- **Администратор** (с доступом к панели администратора):
  - Логин: `admin`
  - Email: `admin@example.com`
  - Пароль: `admin12345`
- **Обычный пользователь**:
  - Логин: `user`
  - Email: `user@example.com`
  - Пароль: `user12345`

## Примеры API-запросов
- **Регистрация пользователя**:
  ```http
  POST /api/users/
  Content-Type: application/json

  {
    "email": "test@example.com",
    "username": "testuser",
    "first_name": "Test",
    "last_name": "User",
    "password": "testpassword123"
  }
  ```

- **Создание рецепта**:
  ```http
  POST /api/recipes/
  Content-Type: application/json

  {
    "name": "Паста Карбонара",
    "ingredients": [
      {"id": 1, "amount": 200},
      {"id": 2, "amount": 100}
    ],
    "tags": [1, 2],
    "cooking_time": 20
  }
  ```

## Использование изображений
- Аватары пользователей загружаются в директорию `media/users/`.
- Поддерживается загрузка изображений рецептов в формате Base64.
- При изменении аватара старое изображение автоматически удаляется для оптимизации хранилища.

## Статические файлы
- `STATICFILES_DIRS` используется для указания директорий с исходными статическими файлами.
- `STATIC_ROOT` — для сбора всех статических файлов в одной директории (например, при деплое).

## Дополнительно
- При необходимости можно добавить собственные команды Django Management, например, для автоматического создания пользователей или наполнения базы данных.
- Тестирование приложения осуществляется с помощью встроенного тестового фреймворка Django.

---

### Авторы
Проект разработан с учётом современных практик разработки на Django. Если у вас есть предложения или замечания, создавайте `issue` в репозитории.